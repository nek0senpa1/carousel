//
// BASE Carousel
// --------------------------------------------------
// An ultra-light, customisable, 'just-works' carousel script
(function(e){"use strict";e.carousel=function(t,n){var r={slide:"img",speed:5e3,transition:"fade",transitionSpeed:2e3,easing:"ease",firstSlide:1,pauseOnHover:!0,cssAnimations:!0,fallback:!0,allowJump:!0,onSlide:function(){},onNext:function(){},onPrev:function(){},onJump:function(){},onStart:function(){},onPause:function(){}},i=this,s=e(t),o;i.create=function(){s.addClass("carousel");s.addClass("transition-"+i.settings.transition);s.find(i.settings.slide).addClass("slide");i.slide(i.settings.firstSlide);i.settings.speed&&i.run()};i.slide=function(t,n,r){n=typeof n!="undefined"?n:i.settings.transitionSpeed;r=typeof r!="undefined"?r:i.settings.easing;var o=s.find(".active").index(".slide")+1,u=s.find(".slide").length,a=s.find(i.settings.slide+":nth-child("+t+")"),l=a.prev(".slide").length===0?s.find(".slide:last"):a.prev(".slide"),c=a.next(".slide").length===0?s.find(".slide:first"):a.next(".slide"),h=i.settings.transition==="slide"?"left":"opacity";if(t>u)return!1;i.settings.cssAnimations&&s.find(".slide").css("transition",h+" "+n/1e3+"s "+r);o>t&&(t!==1||o!==u)?s.addClass("backwards"):s.removeClass("backwards");s.find(".slide").removeClass("left active right");a.addClass("active");l.addClass("left");c.addClass("right");e('a[data-carousel="jump"]').length>0&&e('a[data-carousel="jump"]').each(function(){parseInt(e(this).attr("href").replace("#",""))===t?e(this).addClass("active"):e(this).removeClass("active")});i.settings.fallback&&f(t,n);i.settings.onSlide(t,n)};i.next=function(){var e=s.find(".active").next(".slide").length,t=e===0?0:s.find(".active").index(".slide")+1;i.slide(t+1);i.settings.onNext(t)};i.prev=function(){var e=s.find(".active").prev(".slide").length,t=e===0?s.find(".slide:last").index(".slide")+1:s.find(".active").index(".slide");i.slide(t);i.settings.onPrev(t)};i.jump=function(e){i.pause();if(i.settings.transition==="slide"){var t=s.find(".active").index(".slide")+1,n=e>=t,r=n?e-t:t-e,u=i.settings.transitionSpeed/r,a=1,f=!0;(function l(){var e=n?t+a:t-a,s=f?"ease-in":r===1?"ease-out":"linear";i.slide(e,u,s);r--;a++;f=!1;o=setTimeout(l,u);r<=0&&clearTimeout(o)})()}else i.slide(e);i.settings.onJump(e)};i.run=function(){o=setInterval(function(){i.next()},i.settings.speed);i.settings.onStart()};i.pause=function(){clearInterval(o);i.settings.onPause()};var u=function(){if(!i.settings.pauseOnHover)return!1;s.hover(function(){i.pause()},function(){i.run()})},a=function(){e('a[data-carousel!=""]').click(function(t){i.pause();var n=e(this).attr("data-carousel"),r=e(this).attr("href").replace("#","");if(n==="jump"){if(i.settings.allowJump){e('a[data-carousel="jump"]').removeClass("active");e(this).addClass("active");i.jump(r)}}else i[n]();t.preventDefault()})},f=function(e,t){(!Modernizr.cssanimations||!i.settings.cssAnimations)&&i.settings.transition==="slide"?l(t):(!Modernizr.cssanimations||!i.settings.cssAnimations)&&i.settings.transition==="fade"&&c(t)},l=function(e){s.find(".slide").stop(!0,!0);s.find(".active").animate({left:"0%"},e);s.find(".left").animate({left:"-100%"},e);s.find(".right").animate({left:"100%"},e)},c=function(e){s.find(".slide").stop(!0,!0);s.find(".active").animate({opacity:"1"},e);s.find(".left").animate({opacity:"0"},e);s.find(".right").animate({opacity:"0"},e)};i.settings={};i.init=function(){i.settings=e.extend({},r,n);i.create();u();a()};i.init()};e.fn.carousel=function(t){return this.each(function(){if(undefined===e(this).data("carousel")){var n=new e.carousel(this,t);e(this).data("carousel",n)}})}})(jQuery);